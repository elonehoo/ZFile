var t=(t,e,r)=>new Promise(((a,l)=>{var o=t=>{try{s(r.next(t))}catch(e){l(e)}},n=t=>{try{s(r.throw(t))}catch(e){l(e)}},s=t=>t.done?a(t.value):Promise.resolve(t.value).then(o,n);s((r=r.apply(t,e)).next())}));import{c as e,i as r,T as a,f as l,S as o,b as n,r as s,a5 as d,U as u,W as i,X as c,Z as p,a7 as g,Y as m,a6 as f,a9 as b}from"./vendor.37e0cd1a.js";import w from"./index.be60f48a.js";import{n as v,k as h,t as x,d as y,i as k}from"./index.a4cb9473.js";import{_}from"./logo.1a86dcf3.js";const P=/^[0-9a-zA-Z]+[\w._-|]+@[0-9a-zA-Z]+\.[a-z]{2,}$/,V=/^.*(?=.{8,16})(?=.*\d)(?=.*[a-z]).*$/,D=/^.*(?=.{8,16})(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).*$/,z=/^.*(?=.{8,16})(?=.*\d)(?=.*[a-zA-Z])(?=.*[.!@#$%]).*$/,Z=/^.*(?=.{8,16})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[.!@#$%]).*$/;var $=e({name:"Install",components:{Measure:w},setup(){var e;const u=null==(e=r(h))?void 0:e.smallScreen,i=a(),c=l(),p=o((()=>i.getters["themeModule/getDark"])),g=n(0),m=n(null),f=s({email:"",nickName:"",code:"",onePassword:"",twoPassword:""}),b=d(),w={email:[{validator:(t,e)=>e?P.test(e)?void 0:new Error("please correct the email"):new Error("please input email"),trigger:["blur","input"]},{trigger:"blur"}],nickName:{required:!0,trigger:"blur"},code:{required:!0,trigger:"blur"},onePassword:{validator:(t,e)=>e?e.length<8?new Error("please input more than 8 words in box"):void 0:new Error("please input password"),trigger:"blur"},twoPassword:{validator:(t,e)=>e?f.onePassword&&e!=f.onePassword?new Error("The two inputs are inconsistent"):void 0:new Error("please input password again!"),trigger:"blur"}},_=x((t=>{t||(g.value=0);let e=0;Z.test(t)?e=4:z.test(t)?e=3:D.test(t)?e=2:V.test(t)&&(e=1),g.value=e}),200),$=y((()=>t(this,null,(function*(){var t;t=f.email,v.get({url:"/user/verification",params:{email:t}})}))),5e3,y((()=>{b.warning("get verification code control more frequently, 5s every time.")}),1e3)),E=y((e=>{var r;e.preventDefault(),null==(r=m.value)||r.validate((e=>t(this,null,(function*(){if(e)b.error("please complete info at first");else{const{status:t}=yield(t=>v.post({url:"/user/register",data:t}))(f);k(t)&&c.push("/main")}}))))}),5e3,y((()=>{b.warning("get verification code control more frequently, 5s every time.")}),1e3));return{github:"https://github.com/xiaoxunyao/ZFile",smallScreen:u,isDark:p,formValue:f,rules:w,levelRef:g,throttle_pw:_,debounce_code:$,formRef:m,handleValidateButton:E}}});const E={id:"register",class:"min-w-screen min-h-screen overflow-hidden dark:bg-blue-gray-900 relative"},U=p("img",{class:"absolute w-screen h-screen z-1",src:"/zfile/assets/loading-bg.07cd7ca6.png"},null,-1),q=p("img",{class:"w-28 lg:w-80",src:_},null,-1),A={class:"block lg:flex w-full"},I=b("confirm");$.render=function(t,e,r,a,l,o){const n=u("n-input"),s=u("n-form-item"),d=u("Measure"),b=u("n-button"),w=u("n-form");return i(),c("div",E,[U,p("a",{class:"\n\t\t\t\tabsolute\n\t\t\t\tz-1\n\t\t\t\ttop-0\n\t\t\t\tleft-0\n\t\t\t\tlg:left-1/6\n\t\t\t\tlg:top-1/6\n\t\t\t\ttransform-gpu\n\t\t\t\tlg:-translate-x-1/2 lg:-translate-y-1/2\n\t\t\t\tfadeInto\n\t\t\t",href:t.github,target:"_blank"},[q],8,["href"]),p("div",{class:["\n\t\t\t\tfadeInto\n\t\t\t\tabsolute\n\t\t\t\tz-99\n\t\t\t\ttop-1/2\n\t\t\t\tleft-1/2\n\t\t\t\ttransform\n\t\t\t\t-translate-x-1/2 -translate-y-1/2\n\t\t\t\tpx-4\n\t\t\t\tlg:px-12\n\t\t\t\tlg:pt-12\n\t\t\t\tpb-8\n\t\t\t\trounded-md\n\t\t\t\tlg:border-3\n\t\t\t\tdark:bg-transparent\n\t\t\t\tdark:border-gray-700\n\t\t\t\tlg:shadow-xl\n\t\t\t\tw-[90%]\n\t\t\t\tlg:w-140\n\t\t\t\tlg:text-left\n\t\t\t",{register_bg:!t.smallScreen}]},[p(w,{id:"lg-form",ref:"formRef",model:t.formValue,rules:t.rules,"show-require-mark":!1,"show-feedback":"",onSubmit:e[12]||(e[12]=g((()=>{}),["prevent"]))},{default:m((()=>[p("div",A,[p(s,{path:"nickName",class:"flex-grow"},{default:m((()=>[p(n,{style:{"--box-shadow-focus":t.isDark?"0 0 0 1px rgba(255, 255, 255, 0.7)":"0 0 0 2px rgba(107, 196, 255, 0.7)","--border-focus":t.isDark?"0 0 0 1px rgb(255, 255, 255)":"0 0 0 1px rgb(107, 196, 255)"},placeholder:"nickname",value:t.formValue.nickName,"onUpdate:value":e[1]||(e[1]=e=>t.formValue.nickName=e),onKeydown:e[2]||(e[2]=f(g((()=>{}),["prevent"]),["enter"]))},null,8,["style","value"])])),_:1}),p(s,{class:"lg:flex-grow-[3] lg:ml-4 -mt-4 lg:mt-0",path:"email"},{default:m((()=>[p(n,{style:{"--box-shadow-focus":t.isDark?"0 0 0 1px rgba(255, 255, 255, 0.7)":"0 0 0 2px rgba(107, 196, 255, 0.7)","--border-focus":t.isDark?"0 0 0 1px rgb(255, 255, 255)":"0 0 0 1px rgb(107, 196, 255)"},placeholder:"email",onKeydown:e[3]||(e[3]=f(g((()=>{}),["prevent"]),["enter"])),value:t.formValue.email,"onUpdate:value":e[4]||(e[4]=e=>t.formValue.email=e)},null,8,["style","value"])])),_:1})]),p(s,{path:"code",class:"-mt-4 lg:mt-0"},{default:m((()=>[p(n,{style:{"--box-shadow-focus":t.isDark?"0 0 0 1px rgba(255, 255, 255, 0.7)":"0 0 0 2px rgba(107, 196, 255, 0.7)","--border-focus":t.isDark?"0 0 0 1px rgb(255, 255, 255)":"0 0 0 1px rgb(107, 196, 255)"},placeholder:"verification code",onKeydown:e[5]||(e[5]=f(g((()=>{}),["prevent"]),["enter"])),value:t.formValue.code,"onUpdate:value":e[6]||(e[6]=e=>t.formValue.code=e)},null,8,["style","value"]),p("button",{class:"\n\t\t\t\t\t\t\th-full\n\t\t\t\t\t\t\tw-30\n\t\t\t\t\t\t\tlg:w-40\n\t\t\t\t\t\t\tml-4\n\t\t\t\t\t\t\tborder border-gray-300\n\t\t\t\t\t\t\tbg-gray-100\n\t\t\t\t\t\t\tdark:bg-gray-500\n\t\t\t\t\t\t\trounded-sm\n\t\t\t\t\t\t\ttext-gray-500\n\t\t\t\t\t\t\tdark:text-gray-300\n\t\t\t\t\t\t\thover:text-black\n\t\t\t\t\t\t\thover:border-gray-400\n\t\t\t\t\t\t\tdark:hover:text-white\n\t\t\t\t\t\t\tdark:hover:border-white\n\t\t\t\t\t\t",onClick:e[7]||(e[7]=(...e)=>t.debounce_code&&t.debounce_code(...e))}," get code ")])),_:1}),p(s,{path:"onePassword",class:"-mt-4 lg:mt-0"},{default:m((()=>[p(n,{style:{"--box-shadow-focus":t.isDark?"0 0 0 1px rgba(255, 255, 255, 0.7)":"0 0 0 2px rgba(107, 196, 255, 0.7)","--border-focus":t.isDark?"0 0 0 1px rgb(255, 255, 255)":"0 0 0 1px rgb(107, 196, 255)"},placeholder:"please input password",value:t.formValue.onePassword,"onUpdate:value":e[8]||(e[8]=e=>t.formValue.onePassword=e),onKeydown:e[9]||(e[9]=f(g((()=>{}),["prevent"]),["enter"])),onInput:t.throttle_pw,type:"password"},null,8,["style","value","onInput"])])),_:1}),p(d,{level:t.levelRef,measures:4},null,8,["level"]),p(s,{class:"lg:mb-4",path:"twoPassword"},{default:m((()=>[p(n,{style:{"--box-shadow-focus":t.isDark?"0 0 0 1px rgba(255, 255, 255, 0.7)":"0 0 0 2px rgba(107, 196, 255, 0.7)","--border-focus":t.isDark?"0 0 0 1px rgb(255, 255, 255)":"0 0 0 1px rgb(107, 196, 255)"},type:"password",placeholder:"re-check input password",value:t.formValue.twoPassword,"onUpdate:value":e[10]||(e[10]=e=>t.formValue.twoPassword=e),onKeydown:e[11]||(e[11]=f(g((()=>{}),["prevent"]),["enter"]))},null,8,["style","value"])])),_:1}),p(b,{class:"w-full","attr-type":"button",type:"info",onClick:t.handleValidateButton},{default:m((()=>[I])),_:1},8,["onClick"])])),_:1},8,["model","rules"])],2)])};export default $;
